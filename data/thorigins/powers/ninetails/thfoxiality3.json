{
	"type": "origins:multiple",
	"name": { "translate": "ninetails.thfoxiality3.name" },
	"description": { "translate": "ninetails.thfoxiality3.description" },
	"badges": [
		{
			"type": "origins:tooltip",
			"text": { "translate": "origin.thorigin.passive" },
			"sprite": "minecraft:textures/item/glow_berries.png"
		},
		{
			"type": "origins:tooltip",
			"sprite": "origins:textures/gui/badge/info.png",
			"text": [
				{
					"translate": "thfoxiality3.info"
				},
				{
					"translate": "thfoxiality3.info1"
				}
			]
		},
		{
			"type": "origins:tooltip",
			"sprite": "origins:textures/gui/badge/arrow_up.png",
			"text": { "translate": "thfoxiality3.info2" }
		},
		{
			"type": "origins:tooltip",
			"sprite": "origins:textures/gui/badge/star.png",
			"text": { "translate": "thfoxiality3.info3" }
		}
	],

	"original_thfoxiality_power": {
		"type": "origins:action_on_callback",
		"entity_action_added": {
			"type": "origins:and",
			"actions": [
				{
					"type": "origins:grant_power",
					"power": "*:fox/thfoxiality",
					"source": "thorigins:inherited"
				},
				{
					"type": "origins:delay",
					"ticks": 1,
					"action": {
						"type": "origins:and",
						"actions": [
							{
								"type": "origins:revoke_power",
								"power": "*:fox/thfoxiality_ticks_20",
								"source": "thorigins:inherited"
							},
							{
								"type": "origins:revoke_power",
								"power": "*:fox/thfoxiality_passive_nightvision",
								"source": "thorigins:inherited"
							},
							{
								"type": "origins:revoke_power",
								"power": "*:fox/thfoxiality_vicious_wolves_bears",
								"source": "thorigins:inherited"
							}
						]
					}
				}
			]
		},
		"entity_action_lost": {
			"type": "origins:revoke_power",
			"power": "*:fox/thfoxiality",
			"source": "thorigins:inherited"
		}
	},

	"ticks_20": {
		"type": "origins:action_over_time",
		"interval": 20,
		"entity_action": {
			"type": "origins:and",
			"actions": [
				{
					"type": "origins:area_of_effect",
					"shape": "cube",
					"radius": 15,
					"bientity_condition": {
						"type": "origins:target_condition",
						"condition": {
							"type": "origins:and",
							"conditions": [
								{
									"type": "origins:entity_type",
									"entity_type": "minecraft:fox"
								},
								{
									"type": "origins:nbt",
									"nbt": "{\"Tags\":[\"hatting\"]}",
									"inverted": true
								},
								{
									"type": "origins:nbt",
									"nbt": "{\"Tags\":[\"sleepin\"]}",
									"inverted": true
								},
								{
									"type": "origins:nbt",
									"nbt": "{\"Tags\":[\"uuidappended\"]}",
									"inverted": true
								}
							]
						}
					},
					"bientity_action": {
						"type": "origins:target_action",
						"action": {
							"type": "origins:and",
							"actions": [
								{
									"type": "origins:execute_command",
									"command": "/data modify entity @s Trusted append from entity @p[tag=foxie] UUID"
								},
								{
									"type": "origins:delay",
									"ticks": 1,
									"action": {
										"type": "origins:execute_command",
										"command": "/tag @s add uuidappended"
									}
								}
							]
						}
					}
				},
				{
					"type": "origins:execute_command",
					"command": "/execute as @e[type=fox,tag=uuidappended,tag=!hatting,tag=!sleepin] at @s unless entity @a[distance=..15,tag=foxie] run tag @s remove uuidappended"
				},
				{
					"type": "origins:if_else",
					"condition": {
						"type": "origins:and",
						"conditions": [
							{
								"type": "origins:gamemode",
								"gamemode": "survival"
							},
							{
								"type": "origins:or",
								"conditions": [
									{
										"type": "origins:resource",
										"resource": "*:fox/thfoxify_afk_timer",
										"compare_to": 1,
										"comparison": ">"
									},
									{
										"type": "origins:resource",
										"resource": "*:fox/thfoxify_figura_state",
										"compare_to": 1,
										"comparison": "=="
									}
								]
							}
						]
					},
					"if_action": {
						"type": "origins:if_else",
						"condition": {
							"type": "origins:or",
							"conditions": [
								{
									"type": "origins:power",
									"power": "*:fox/thhunt",
									"inverted": true
								},
								{
									"type": "origins:resource",
									"resource": "*:ninetails/thhunt3_prepare_stage",
									"compare_to": 25,
									"comparison": ">"
								}
							]
						},
						"if_action": {
							"type": "origins:and",
							"actions": [
								{
									"type": "origins:execute_command",
									"command": "/execute as @e[type=wolf,distance=..18] unless data entity @s Owner run data modify entity @s AngerTime set value 25"
								},
								{
									"type": "origins:execute_command",
									"command": "/execute as @e[type=polar_bear,distance=..16] unless data entity @s Owner run data modify entity @s AngerTime set value 25"
								},
								{
									"type": "origins:delay",
									"ticks": 1,
									"action": {
										"type": "origins:and",
										"actions": [
											{
												"type": "origins:execute_command",
												"command": "/execute as @e[type=wolf,distance=..18] unless data entity @s Owner run data modify entity @s AngryAt set from entity @p[tag=foxie] UUID"
											},
											{
												"type": "origins:execute_command",
												"command": "/execute as @e[type=polar_bear,distance=..16] unless data entity @s Owner run data modify entity @s AngryAt set from entity @p[tag=foxie] UUID"
											}
										]
									}
								}
							]
						},
						"else_action": {
							"type": "origins:and",
							"actions": [
								{
									"type": "origins:execute_command",
									"command": "/execute as @e[type=wolf,distance=..2] unless data entity @s Owner run data modify entity @s AngerTime set value 25"
								},
								{
									"type": "origins:execute_command",
									"command": "/execute as @e[type=polar_bear,distance=..2] unless data entity @s Owner run data modify entity @s AngerTime set value 25"
								},
								{
									"type": "origins:delay",
									"ticks": 1,
									"action": {
										"type": "origins:and",
										"actions": [
											{
												"type": "origins:execute_command",
												"command": "/execute as @e[type=wolf,distance=..2] unless data entity @s Owner run data modify entity @s AngryAt set from entity @p[tag=foxie] UUID"
											},
											{
												"type": "origins:execute_command",
												"command": "/execute as @e[type=polar_bear,distance=..2] unless data entity @s Owner run data modify entity @s AngryAt set from entity @p[tag=foxie] UUID"
											}
										]
									}
								}
							]
						}
					}
				}
			]
		}
	},

	"stronger_passive_nightvision": {
		"type": "origins:toggle_night_vision",
		"active_by_default": true,
		"strength": 1,
		"key": "nuh.uh",
		"condition": {
			"type": "origins:and",
			"conditions": [
				{
					"type": "origins:resource",
					"resource": "*:fox/universal_settings_passive_nightvision",
					"compare_to": 1,
					"comparison": "==" 
				},
				{
					"type": "origins:equipped_item",
					"inverted": true,
					"equipment_slot": "offhand",
					"item_condition": {
						"type": "origins:ingredient",
						"ingredient": {
							"tag": "thorigins:night_vision_blocking"
						}
					}
				}
			]
		}
	},
	
	"blind_effect": {
		"type": "origins:active_self",
		"key": "key.swapOffhand",
		"cooldown": 0,
		"entity_action": {
			"type": "origins:if_else",
			"condition": {
				"type": "origins:and",
				"conditions": [
					{
						"type": "origins:resource",
						"resource": "*:fox/universal_settings_passive_nightvision",
						"compare_to": 1,
						"comparison": "==" 
					},
					{
						"type": "origins:equipped_item",
						"equipment_slot": "offhand",
						"inverted": true,
						"item_condition": {
							"type": "origins:ingredient",
							"ingredient": {
								"tag": "thorigins:night_vision_blocking"
							}
						}
					},
					{
						"type": "origins:equipped_item",
						"equipment_slot": "mainhand",
						"item_condition": {
							"type": "origins:ingredient",
							"ingredient": {
								"tag": "thorigins:night_vision_blocking"
							}
						}
					},
					{
						"type": "origins:brightness",
						"compare_to": 0.5,
						"comparison": "<="
					}
				]
			},
			"if_action": {
				"type": "origins:apply_effect",
				"effect": {
					"id": "minecraft:blindness",
					"amplifier": 0,
					"duration": 15,
					"is_ambient": true,
					"show_icon": false,
					"show_particles": false
				}
			}
		}
	},

	"modified_vicious_wolves_bears": {
		"type": "origins:action_when_hit",
		"cooldown": 4,
		"bientity_condition": {
			"type": "origins:actor_condition",
			"condition": {
				"type": "origins:or",
				"conditions": [
					{
						"type": "origins:entity_type",
						"entity_type": "minecraft:wolf"
					},
					{
						"type": "origins:entity_type",
						"entity_type": "minecraft:polar_bear"
					},
					{
						"type": "origins:nbt",
						"nbt": "{\"Tags\":[\"foxie_predator\"]}"
					}
				]
			}
		},
		"damage_condition": {
			"type": "origins:and",
			"conditions": [
				{
					"type": "origins:amount",
					"compare_to": 2.5,
					"comparison": ">="
				},
				{
					"type": "origins:projectile",
					"inverted": true
				},
				{
					"type": "origins:in_tag",
					"tag": "minecraft:bypasses_cooldown",
					"inverted": true
				}
			]
		},
		"bientity_action": {
			"type": "origins:and",
			"actions": [
				{
					"type": "origins:target_action",
					"action": {
						"type": "origins:and",
						"actions": [
							{
								"type": "origins:if_else",
								"condition": {
									"type": "origins:equipped_item",
									"equipment_slot": "head",
									"item_condition": {
										"type": "origins:empty",
										"inverted": true
									}
								},
								"if_action": {
									"type": "origins:chance",
									"chance": 0.314,
									"success_action": {
										"type": "origins:change_resource",
										"resource": "*:fox/thfoxiality_predator_bite_threshold",
										"change": -8
									},
									"fail_action": {
										"type": "origins:nothing"
									}
								}
							},
							{
								"type": "origins:if_else",
								"condition": {
									"type": "origins:equipped_item",
									"equipment_slot": "chest",
									"item_condition": {
										"type": "origins:empty",
										"inverted": true
									}
								},
								"if_action": {
									"type": "origins:chance",
									"chance": 0.314,
									"success_action": {
										"type": "origins:change_resource",
										"resource": "*:fox/thfoxiality_predator_bite_threshold",
										"change": -15
									},
									"fail_action": {
										"type": "origins:nothing"
									}
								}
							},
							{
								"type": "origins:if_else",
								"condition": {
									"type": "origins:equipped_item",
									"equipment_slot": "legs",
									"item_condition": {
										"type": "origins:empty",
										"inverted": true
									}
								},
								"if_action": {
									"type": "origins:chance",
									"chance": 0.314,
									"success_action": {
										"type": "origins:change_resource",
										"resource": "*:fox/thfoxiality_predator_bite_threshold",
										"change": -10
									},
									"fail_action": {
										"type": "origins:nothing"
									}
								}
							},
							{
								"type": "origins:if_else",
								"condition": {
									"type": "origins:equipped_item",
									"equipment_slot": "feet",
									"item_condition": {
										"type": "origins:empty",
										"inverted": true
									}
								},
								"if_action": {
									"type": "origins:chance",
									"chance": 0.314,
									"success_action": {
										"type": "origins:change_resource",
										"resource": "*:fox/thfoxiality_predator_bite_threshold",
										"change": -5
									},
									"fail_action": {
										"type": "origins:nothing"
									}
								}
							},
							{
								"type": "origins:if_else_list",
								"actions": [
									{
										"condition": {
											"type": "origins:status_effect",
											"effect": "minecraft:resistance",
											"min_amplifier": 3
										},
										"action": {
											"type": "origins:change_resource",
											"resource": "*:fox/thfoxiality_predator_bite_threshold",
											"change": -20
										}
									},
									{
										"condition": {
											"type": "origins:status_effect",
											"effect": "minecraft:resistance",
											"min_amplifier": 2
										},
										"action": {
											"type": "origins:change_resource",
											"resource": "*:fox/thfoxiality_predator_bite_threshold",
											"change": -12
										}
									},
									{
										"condition": {
											"type": "origins:status_effect",
											"effect": "minecraft:resistance",
											"min_amplifier": 1
										},
										"action": {
											"type": "origins:change_resource",
											"resource": "*:fox/thfoxiality_predator_bite_threshold",
											"change": -7
										}
									},
									{
										"condition": {
											"type": "origins:status_effect",
											"effect": "minecraft:resistance"
										},
										"action": {
											"type": "origins:change_resource",
											"resource": "*:fox/thfoxiality_predator_bite_threshold",
											"change": -5
										}
									}
								]
							}
						]
					}
				},
				{
					"type": "origins:if_else",
					"condition": {
						"type": "origins:target_condition",
						"condition": {
							"type": "origins:resource",
							"resource": "*:fox/thfoxiality_predator_bite_threshold",
							"compare_to": 80,
							"comparison": ">"
						}
					},
					"if_action": {
						"type": "origins:delay",
						"ticks": 4,
						"action": {
							"type": "origins:and",
							"actions": [
								{
									"type": "origins:damage",
									"amount": 2,
									"damage_type": "thorigins:predator_bite"
								},
								{
									"type": "origins:target_action",
									"action": {
										"type": "origins:and",
										"actions": [
											{
												"type": "origins:execute_command",
												"command": "/particle dust_color_transition 1 0 0 1.2 0.15 0 0 ~ ~0.6 ~ 0.1 0.1 0.1 5 8 force"
											},
											{
												"type": "origins:execute_command",
												"command": "/particle dust_color_transition 1 0 0 0.5 0.15 0 0 ~ ~0.6 ~ 0.15 0.15 0.15 10 16 force"
											},
											{
												"type": "origins:play_sound",
												"sound": "minecraft:entity.zombie.break_wooden_door",
												"volume": 0.3,
												"pitch": 1.5
											},
											{
												"type": "origins:trigger_cooldown",
												"power": "*:fox/thfoxiality_predator_suppression"
											}
										]
									}
								}
							]
						}
					}
				},
				{
					"type": "origins:delay",
					"ticks": 1,
					"action": {
						"type": "origins:target_action",
						"action": {
							"type": "origins:change_resource",
							"resource": "*:fox/thfoxiality_predator_bite_threshold",
							"change": 100,
							"operation": "set"
						}
					}
				}
			]
		}
	},

	"undeadness": {
		"type": "origins:modify_type_tag",
		"tag": "undead"
	},

	"undead_resistence": {
		"type": "origins:modify_damage_taken",
		"damage_condition": {
			"type": "origins:attacker",
			"entity_condition": {
				"type": "origins:in_tag",
				"tag": "undead"
			}
		},
		"modifier": {
			"operation": "multiply_total_multiplicative",
			"amount": -0.25
		}
	},

	"wooden_sword_weakness": {
		"type": "origins:modify_damage_taken",
		"damage_condition": {
			"type": "origins:projectile",
			"inverted": true
		},
		"bientity_condition": {
			"type": "origins:actor_condition",
			"condition": {
				"type": "origins:equipped_item",
				"item_condition": {
					"type": "origins:all_of",
					"conditions": [
						{
							"type": "origins:ingredient",
							"ingredient": {
								"item": "minecraft:wooden_sword"
							}
						},
						{
							"type": "origins:enchantment",
							"enchantment": "minecraft:smite",
							"compare_to": 0,
							"comparison": ">"
						}
					]
				},
				"equipment_slot": "mainhand"
			}
		},
		"modifier": {
			"amount": 1,
			"operation": "multiply_total_multiplicative"
		},
		"bientity_action": {
			"type": "origins:and",
			"actions": [
				{
					"type": "origins:add_velocity",
					"z": 3
				},
				{
					"type": "origins:target_action",
					"action": {
						"type": "origins:and",
						"actions": [
							{
								"type": "origins:play_sound",
								"sound": "minecraft:entity.generic.extinguish_fire",
								"category": "players",
								"pitch": 1.5,
								"volume": 2
							},
							{
								"type": "origins:spawn_particles",
								"particle": "minecraft:smoke",
								"speed": 0.01,
								"spread": {
									"x": 0.5,
									"y": 0.5,
									"z": 0.5
								},
								"offset_y": 0.5,
								"count": 40
							},
							{
								"type": "origins:play_sound",
								"sound": "minecraft:entity.fox.screech",
								"pitch": 1.8,
								"volume": 0.7
							},
							{
								"type": "origins:apply_effect",
								"effects": [
									{
										"id": "minecraft:darkness",
										"duration": 60,
										"show_icon": true,
										"show_particles": false,
										"is_ambient": true,
										"amplifier": 0
									},
									{
										"id": "minecraft:weakness",
										"duration": 60,
										"show_icon": true,
										"show_particles": false,
										"is_ambient": true,
										"amplifier": 2
									},
									{
										"id": "minecraft:slowness",
										"duration": 60,
										"show_icon": true,
										"show_particles": false,
										"is_ambient": true,
										"amplifier": 4
									}
								]
							}
						]
					}
				}
			]
		}
	}
}
